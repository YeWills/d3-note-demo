<html>  
  <head>  
        <meta charset="utf-8">  
        <title>4.8.1 矩形和文字</title>  
  </head> 
<body>

<script src="../../d3/4.x/d3.min.js" charset="utf-8"></script> 
<script>  


var dataset = [50, 43, 120, 87, 99, 167, 142];
var height = 400;	//SVG绘制区域的高度

//矩形所占的宽度（包括空白），单位为像素
var rectStep = 35;	
//矩形所占的宽度（不包括空白），单位为像素
var rectWidth = 30;

var svg = d3.select('body')
			.append('svg')
			.attr('height', 400)
			.attr('width', 400)
      .attr('width', 400)
      
      svg.selectAll('rect')
         .data(dataset)
         .enter()
         .append('rect')
         .attr('x', (item, i,o)=>{
           return (i+1)*rectStep;
         })
         .attr('y', (item)=>{
           return height-item;
         })
         .attr('width', rectWidth)
         .attr('height', (a,b,c)=>{
           return a;
         })
         .attr('fill', 'yellow')

         svg.selectAll('text')
         .data(dataset)
         .enter()
         .append('text')
         .attr('x', (item, i,o)=>{
          return (i+1)*rectStep;
         })
         .attr('y', (item)=>{
           console.log(item);
           return height-item+5;
         })
         .attr("fill","black")
				.attr("font-size","14px")
        .attr("text-anchor","middle")
        .attr("dx",30/2)
				.attr("dy","1em")
         .text(t=>{
           return t;
         })
        //  .data(dataset)			//绑定数据
				// .enter()				//获取enter部分
				// .append("text")			//添加text元素，使其与绑定数组的长度一致
        // .attr("fill","black")
				// .attr("font-size","14px")
				// .attr("text-anchor","middle")
				// .attr("x", function(d,i){
				// 	return 40 + i * 20;
				// })
				// .attr("y", function(d){
				// 	return 400- 50 - d;
				// })
				// .attr("dx",50/2)
				// .attr("dy","1em")
				// .text(function(d){
				// 	return d;
				// });
	
</script> 

</body>

</html>